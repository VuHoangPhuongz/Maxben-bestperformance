<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi Ti·∫øt S·∫£n Ph·∫©m - MAXBEN</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>

body {
    font-family: 'Be Vietnam Pro', sans-serif;
    background-color: #0f172a; /* N·ªÅn xanh ƒëen ƒë·∫≠m cho to√†n b·ªô trang */
    color: #e2e8f0; /* Ch·ªØ x√°m r·∫•t nh·∫°t */
    scroll-behavior: smooth;
}
       .thumbnail.active { border-color: #2563eb; }

.variant-btn {
    border: 1px solid #4b5563; color: #d1d5db; transition: all 0.2s ease-in-out;
}
.variant-btn:hover { border-color: #2563eb; color: #2563eb; }
.variant-btn.active { border-color: #2563eb; background-color: #2563eb; color: white; box-shadow: 0 4px 14px rgba(59, 130, 246, 0.25); }

#sticky-cta-bar {
    transition: transform 0.3s ease-in-out; transform: translateY(100%);
    background-color: rgba(15, 23, 42, 0.9); backdrop-filter: blur(8px);
    border-top: 1px solid #334155;
}
#sticky-cta-bar.visible { transform: translateY(0); }

.tab-btn { position: relative; color: #9ca3af; }
.tab-btn.active { color: #3b82f6; }
.tab-btn.active::after {
    content: ''; position: absolute; bottom: -1px; left: 0; right: 0; height: 2px; background-color: #3b82f6;
}

#main-cta-buttons a i { opacity: 1 !important; display: inline-block !important; }
#specs-content table {
    border-collapse: collapse; /* G·ªôp c√°c ƒë∆∞·ªùng vi·ªÅn l·∫°i */
}

#specs-content tr {
    /* D√πng ƒë∆∞·ªùng k·∫ª d∆∞·ªõi ƒë·ªÉ ph√¢n t√°ch c√°c h√†ng, thay v√¨ m√†u n·ªÅn xen k·∫Ω */
    border-bottom: 1px solid #334155; 
}

#specs-content tr:last-child {
    border-bottom: none; /* B·ªè ƒë∆∞·ªùng k·∫ª ·ªü h√†ng cu·ªëi c√πng */
}

#specs-content td {
    padding: 1rem; /* TƒÉng kho·∫£ng c√°ch cho d·ªÖ ƒë·ªçc */
}

/* ƒê·ªãnh d·∫°ng cho c·ªôt t√™n thu·ªôc t√≠nh (C√¥ng su·∫•t, Quang th√¥ng,...) */
#specs-content td:first-child {
    font-weight: 600;
    color: #94a3b8; /* M√†u x√°m nh·∫°t cho ch·ªØ */
    width: 30%; /* Cho c·ªôt t√™n thu·ªôc t√≠nh c√≥ ƒë·ªô r·ªông c·ªë ƒë·ªãnh */
}

/* ƒê·ªãnh d·∫°ng cho c·ªôt gi√° tr·ªã (7W, 630lm,...) */
#specs-content td:last-child {
    color: #ffffff; /* Ch·ªØ tr·∫Øng ƒë·ªÉ tƒÉng ƒë·ªô t∆∞∆°ng ph·∫£n */
    font-weight: 500;
}
    </style>
</head>
<body class="text-primary">

   
    <header class="sticky-nav border-b border-gray-700/50">
        <nav class="container mx-auto px-4 lg:px-6 py-4 flex justify-between items-center">
             <a href="index.html" class="text-3xl font-bold gradient-text">MAXBENüí°</a>
             <div class="hidden md:flex items-center space-x-8 font-medium text-gray-300">
                <a href="index.html" class="hover:text-white">Trang Ch·ªß</a>
                <a href="index.html#new-product-catalog" class="text-blue-400 font-semibold">S·∫£n Ph·∫©m</a>
                <a href="index.html#solutions" class="hover:text-white">Gi·∫£i Ph√°p</a>
             </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 lg:px-6 py-8">
        <div id="breadcrumbs" class="text-sm text-gray-400 mb-4">
            <a href="index.html" class="hover:text-white">Trang ch·ªß</a> &gt; 
            <a id="breadcrumb-category" href="index.html#new-product-catalog" class="hover:text-white">S·∫£n Ph·∫©m</a> &gt; 
            <span id="breadcrumb-product" class="font-semibold text-white">...</span>
        </div>

        <div class="bg-gray-800/50 p-4 sm:p-6 md:p-8 rounded-2xl shadow-2xl border border-gray-700/50">
            <div class="grid lg:grid-cols-5 gap-8">
                <div class="lg:col-span-2">
                    <div class="mb-4 rounded-lg overflow-hidden border border-gray-700">
                        <img id="mainImage" src="https://placehold.co/600x600/1f2937/4b5563?text=..." alt="H√¨nh ·∫£nh s·∫£n ph·∫©m" class="w-full h-auto object-contain transition-all duration-300">
                    </div>
                    <div id="thumbnail-gallery" class="grid grid-cols-5 gap-3"></div>
                </div>

                <div class="lg:col-span-3">
                    <h1 id="productName" class="text-2xl md:text-3xl font-bold text-white mb-2">ƒêang t·∫£i...</h1>
                    <p id="productSku" class="text-xs text-gray-400 mb-3">M√£ SP: ...</p>
                    
                    <div id="price-section" class="mb-6">
                        <span id="productPrice" class="text-3xl md:text-4xl font-bold gradient-text">...</span>
                    </div>

                    <div id="variants-section" class="mb-6"></div>
                    
                    <div class="flex items-center space-x-6 border-t border-b border-gray-700 py-4 mb-6">
                        <div class="flex items-center text-sm text-gray-300"><i class="fas fa-check-circle mr-2 text-green-500"></i><span>H√†ng ch√≠nh h√£ng</span></div>
                        <div class="flex items-center text-sm text-gray-300"><i class="fas fa-shield-alt mr-2 text-blue-500"></i><span>B·∫£o h√†nh 2-3 nƒÉm</span></div>
                        <div class="flex items-center text-sm text-gray-300"><i class="fas fa-medal mr-2 text-yellow-500"></i><span>Ch·∫•t l∆∞·ª£ng cao</span></div>
                    </div>

                    <div id="main-cta-buttons" class="flex flex-col sm:flex-row items-center space-y-3 sm:space-y-0 sm:space-x-4">
                        <a href="tel:0886666730" class="w-full text-center bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-all transform hover:scale-105 shadow-lg hover:shadow-blue-500/50"><i class="fas fa-phone-alt mr-2"></i> Nh·∫≠n T∆∞ V·∫•n Ngay</a>
                        <a href="#" class="w-full text-center bg-gray-700 text-gray-200 font-bold py-3 px-6 rounded-lg hover:bg-gray-600 transition-all"><i class="fas fa-headset mr-2"></i> Y√™u C·∫ßu B√°o Gi√°</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-gray-800/50 p-6 md:p-8 rounded-2xl shadow-2xl mt-8 border border-gray-700/50">
            <div class="border-b border-gray-700">
                <nav class="flex space-x-8" id="tab-buttons">
                    <button data-tab="description" class="tab-btn active font-semibold text-lg py-3">M√¥ t·∫£ chi ti·∫øt</button>
                    <button data-tab="specs" class="tab-btn font-semibold text-lg py-3">Th√¥ng s·ªë k·ªπ thu·∫≠t</button>
                </nav>
            </div>
            <div class="mt-6" id="tab-content">
                <div id="description-content" class="tab-panel prose max-w-none text-gray-300 leading-relaxed"></div>
                <div id="specs-content" class="tab-panel hidden overflow-x-auto">
                    <table class="w-full min-w-full text-sm text-left"><tbody class="divide-y divide-gray-700"></tbody></table>
                </div>
            </div>
        </div>
        
        <section id="related-products-section" class="mt-12" style="display: none;"><h2 class="text-2xl font-bold mb-6 text-white">S·∫£n ph·∫©m t∆∞∆°ng t·ª±</h2><div id="related-products-grid" class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-4 md:gap-6"></div></section>
    </main>

    <div id="sticky-cta-bar" class="fixed bottom-0 left-0 right-0 p-4 z-30">
        <div class="container mx-auto px-4 lg:px-6 flex items-center justify-between"><div class="flex items-center"><img id="sticky-cta-image" src="" class="w-12 h-12 rounded-md mr-4 hidden sm:block"><div><p id="sticky-cta-name" class="font-semibold text-white truncate max-w-xs"></p><p id="sticky-cta-price" class="font-bold text-blue-400 text-lg"></p></div></div><a href="tel:0886666730" class="bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition-all shadow-lg text-sm sm:text-base">Li√™n H·ªá Ngay</a></div>
    </div>


    <script src="product-details.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // === KH·ªûI T·∫†O V√Ä L·∫§Y D·ªÆ LI·ªÜU ===
        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get('id');
        const mainContent = document.querySelector('main');

        if (!productId || !allProducts[productId]) {
            mainContent.innerHTML = `<div class="text-center py-20"><h1 class="text-2xl text-red-500">L·ªói: Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m.</h1><p class="text-secondary mt-2">Vui l√≤ng quay l·∫°i trang s·∫£n ph·∫©m v√† th·ª≠ l·∫°i.</p><a href="index.html#product-library" class="mt-6 inline-block bg-accent text-white font-semibold py-2 px-5 rounded-lg">Quay l·∫°i</a></div>`;
            return;
        }

        const currentProduct = allProducts[productId];
        const productVariants = Object.values(allProducts).filter(p => p.name === currentProduct.name);

        // === C√ÅC H√ÄM C·∫¨P NH·∫¨T GIAO DI·ªÜN ===
 // THAY TH·∫æ TO√ÄN B·ªò H√ÄM N√ÄY B·∫∞NG PHI√äN B·∫¢N M·ªöI D∆Ø·ªöI ƒê√ÇY
        function updateProductDisplay(product) {
            document.title = `${product.displayName} - MAXBEN`;
            document.getElementById('productName').textContent = product.displayName;
            document.getElementById('productSku').textContent = `M√£ SP: ${product['M√£ Qu·∫£n L√Ω'] || 'N/A'}`;
            document.getElementById('productPrice').textContent = product.price || "Li√™n h·ªá";
            document.getElementById('breadcrumb-category').textContent = product.category;
            document.getElementById('breadcrumb-product').textContent = product.displayName;
            
            const mainImage = document.getElementById('mainImage');
            mainImage.src = product.image;
            
            const thumbnailContainer = document.getElementById('thumbnail-gallery');
            thumbnailContainer.innerHTML = '';
            (product.gallery || [product.image]).forEach((imgSrc, index) => {
                if (!imgSrc) return;
                const thumb = document.createElement('img');
                thumb.src = imgSrc;
                thumb.className = `thumbnail w-full h-auto aspect-square object-cover cursor-pointer rounded-md border-2 bg-gray-700 ${index === 0 ? 'active' : 'border-transparent'}`;
                thumb.onclick = () => { mainImage.src = imgSrc; document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active')); thumb.classList.add('active'); };
                thumbnailContainer.appendChild(thumb);
            });

            // ==========================================================
            // === PH·∫¶N ƒê∆Ø·ª¢C C·∫¨P NH·∫¨T ƒê·ªÇ T√ÅCH D√íNG M√î T·∫¢ ===
            // ==========================================================
            const featuresContainer = document.getElementById('description-content');
            if (product.features) {
                // T√°ch chu·ªói m√¥ t·∫£ th√†nh c√°c c√¢u d·ª±a v√†o d·∫•u ch·∫•m.
                const featuresList = product.features
                    .split('.') // T√°ch chu·ªói th√†nh m·∫£ng c√°c c√¢u
                    .filter(sentence => sentence.trim() !== '') // L·ªçc b·ªè c√°c chu·ªói r·ªóng c√≥ th·ªÉ c√≥
                    .map(sentence => `<li class="pb-2">${sentence.trim()}.</li>`) // B·ªçc m·ªói c√¢u trong th·∫ª <li> v√† th√™m d·∫•u ch·∫•m l·∫°i
                    .join(''); // N·ªëi c√°c th·∫ª <li> l·∫°i v·ªõi nhau

                // Th√™m v√†o container d∆∞·ªõi d·∫°ng danh s√°ch g·∫°ch ƒë·∫ßu d√≤ng
                featuresContainer.innerHTML = `<ul class="list-disc list-inside space-y-1">${featuresList}</ul>`;
            } else {
                featuresContainer.innerHTML = '<p>Kh√¥ng c√≥ m√¥ t·∫£ chi ti·∫øt.</p>';
            }
            // ==========================================================

            const specsTableBody = document.querySelector('#specs-content tbody');
            specsTableBody.innerHTML = `
                <tr><td>C√¥ng su·∫•t</td><td>${product.power || 'N/A'}</td></tr>
                <tr><td>Quang th√¥ng</td><td>${product.lumen || 'N/A'}</td></tr>
                <tr><td>Nhi·ªát ƒë·ªô m√†u</td><td>${product.light || 'N/A'}</td></tr>
                <tr><td>K√≠ch th∆∞·ªõc</td><td>${product.dimensions_mm || product.k√≠ch_th∆∞·ªõc || 'N/A'}</td></tr>
                <tr><td>L·ªó kho√©t</td><td>${product.cutout_mm || product.c·∫Øt_l·ªó || 'N/A'}</td></tr>
            `;
            
            document.getElementById('sticky-cta-image').src = product.image;
            document.getElementById('sticky-cta-name').textContent = product.displayName;
            document.getElementById('sticky-cta-price').textContent = product.price || "Li√™n h·ªá";
            
            document.querySelectorAll('.variant-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.variantId === product.id);
            });
        }

        // === T·∫†O C√ÅC N√öT CH·ªåN BI·∫æN TH·ªÇ ===
        const variantsContainer = document.getElementById('variants-section');
        if (productVariants.length > 1) {
            const variantLabel = document.createElement('p');
            variantLabel.className = "font-semibold mb-3 text-primary";
            variantLabel.textContent = "Ch·ªçn c√¥ng su·∫•t:";
            variantsContainer.appendChild(variantLabel);
            const buttonGroup = document.createElement('div');
            buttonGroup.className = 'flex flex-wrap gap-3';
            productVariants.forEach(variant => {
                const btn = document.createElement('button');
                btn.className = 'variant-btn py-2 px-4 rounded-lg font-semibold';
                btn.textContent = variant.power;
                btn.dataset.variantId = variant.id;
                btn.onclick = () => updateProductDisplay(allProducts[variant.id]);
                buttonGroup.appendChild(btn);
            });
            variantsContainer.appendChild(buttonGroup);
        }

        // ==========================================================
        // === M·ªöI: LOGIC T·∫†O DANH S√ÅCH S·∫¢N PH·∫®M T∆Ø∆†NG T·ª∞ ===
        // ==========================================================
   // THAY TH·∫æ TO√ÄN B·ªò H√ÄM N√ÄY B·∫∞NG PHI√äN B·∫¢N M·ªöI
        function renderRelatedProducts(product) {
            const relatedContainer = document.getElementById('related-products-section');
            const relatedGrid = document.getElementById('related-products-grid');

            // 1. L·ªçc c√°c d√≤ng s·∫£n ph·∫©m c√πng danh m·ª•c, kh√°c s·∫£n ph·∫©m hi·ªán t·∫°i
            const uniqueRelatedNames = new Set();
            Object.values(allProducts)
                .filter(p => p.category === product.category && p.name !== product.name)
                .forEach(p => uniqueRelatedNames.add(p.name));
            
            const relatedProducts = Array.from(uniqueRelatedNames)
                .map(name => Object.values(allProducts).find(p => p.name === name)) // L·∫•y s·∫£n ph·∫©m ƒë·∫°i di·ªán
                .slice(0, 4); // L·∫•y t·ªëi ƒëa 4 s·∫£n ph·∫©m

            // 2. N·∫øu c√≥ s·∫£n ph·∫©m, th√¨ hi·ªÉn th·ªã ra
            if (relatedProducts.length > 0) {
                relatedContainer.style.display = 'block';
                relatedGrid.innerHTML = ''; 

                relatedProducts.forEach(relProd => {
                    const card = document.createElement('a');
                    card.href = `product-detail.html?id=${relProd.id}`;
                    // D√πng class 'product-card-new' ƒë·ªÉ ƒë·ªìng b·ªô style
                    card.className = 'product-card-new'; 
                    
                    // C·∫•u tr√∫c HTML b√™n trong card GI·ªêNG H·ªÜT trang ch·ªß
                    card.innerHTML = `
                        <div class="product-image-wrapper p-4 bg-gray-800/50 aspect-square flex items-center justify-center">
                            <img src="${relProd.image}" alt="${relProd.displayName}" class="max-w-full max-h-full object-contain">
                        </div>
                        <div class="p-4 border-t border-gray-700 flex-grow flex flex-col">
                            <h4 class="font-bold text-md text-white flex-grow">${relProd.displayName}</h4>
                            <p class="text-sm text-gray-400 mt-1">${relProd.category}</p>
                            <div class="flex justify-between items-center mt-4">
                                <span class="font-bold text-lg text-blue-400">${relProd.price}</span>
                                <span class="w-8 h-8 flex items-center justify-center bg-gray-700 rounded-full text-gray-400 hover:bg-blue-600 hover:text-white transition-colors">
                                    <i class="fas fa-plus"></i>
                                </span>
                            </div>
                        </div>
                    `;
                    relatedGrid.appendChild(card);
                });
            }
        }

        // === LOGIC X·ª¨ L√ù T∆Ø∆†NG T√ÅC ===
        const tabButtons = document.querySelectorAll('.tab-btn');
        const tabPanels = document.querySelectorAll('.tab-panel');
        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                tabButtons.forEach(btn => btn.classList.remove('active'));
                tabPanels.forEach(panel => panel.classList.add('hidden'));
                button.classList.add('active');
                const tabId = button.getAttribute('data-tab');
                document.getElementById(tabId + '-content').classList.remove('hidden');
            });
        });

        const stickyBar = document.getElementById('sticky-cta-bar');
        const mainCtaButtons = document.getElementById('main-cta-buttons');
        const observer = new IntersectionObserver(
            ([entry]) => { stickyBar.classList.toggle('visible', !entry.isIntersecting); },
            { threshold: 0.5 }
        );
        if(mainCtaButtons) observer.observe(mainCtaButtons);

        // === HI·ªÇN TH·ªä D·ªÆ LI·ªÜU L·∫¶N ƒê·∫¶U ===
        updateProductDisplay(currentProduct);
        renderRelatedProducts(currentProduct); // <--- G·ªåI H√ÄM M·ªöI ·ªû ƒê√ÇY
    });
</script>
</body>
</html>